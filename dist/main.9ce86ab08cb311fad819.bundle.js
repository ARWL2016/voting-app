webpackJsonp([1,5],{"+Cee":function(t,e,n){"use strict";var o=n("3j3K"),r=n("Fzro"),a=n("+pb+"),i=(n.n(a),n("EnA3")),s=(n.n(i),n("eErF"));n.n(s);n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t){this._http=t,this._dataUrl="/api/data/"}return t.prototype.fetchTopicIndex=function(){return this._http.get(this._dataUrl).map(function(t){return t.json()}).toPromise()},t.prototype.fetchTopicById=function(t){return this._http.get(this._dataUrl+t).map(function(t){return t.json()})},t.prototype.fetchTopicsByUser=function(){var t=this._dataUrl+"current",e=this.addAuthTokenToHeader();return this._http.get(t,e).map(function(t){return t.json()}).toPromise()},t.prototype.addNewTopic=function(t){return this._http.post(this._dataUrl,t).map(function(t){return t.json()}).do(function(t){return console.log(t)})},t.prototype.castVote=function(t,e){var n=this._dataUrl+"vote/"+t,o=this.addAuthTokenToHeader();return this._http.put(n,e,o).toPromise()},t.prototype.deleteTopic=function(t){var e=""+this._dataUrl+t,n=this.addAuthTokenToHeader();return this._http.delete(e,n).toPromise()},t.prototype.addAuthTokenToHeader=function(){var t=window.localStorage.getItem("token"),e=new r.b({"Content-Type":"application/json","x-auth":t});return new r.c({headers:e})},t}();p=c([n.i(o.Injectable)(),l("design:paramtypes",["function"==typeof(u=void 0!==r.d&&r.d)&&u||Object])],p);var u},0:function(t,e,n){t.exports=n("x35b")},"3jKc":function(t,e,n){"use strict";var o=n("3j3K");n.d(e,"a",function(){return a});var r=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};toastr.options={positionClass:"toast-top-right",timeOut:"2500"};var a=function(){function t(){}return t.prototype.success=function(t,e){toastr.success(t,e)},t.prototype.info=function(t,e){toastr.info(t,e)},t.prototype.warning=function(t,e){toastr.warning(t,e)},t.prototype.error=function(t,e){toastr.error(t,e)},t}();a=r([n.i(o.Injectable)()],a)},"4QKn":function(t,e){t.exports='<section\r\n  class="about-wrapper"\r\n  [@showPage]="\'on\'">\r\n\r\n    <div class="panel panel-success">\r\n      <div class="panel-heading">\r\n        <h3 class="panel-title">About Votogo</h3>\r\n      </div>\r\n      <div class="panel-body">\r\n        <p>VOTOGO is a voting app which allows users to create, share and view the results of surveys,\r\n          and vote on other people\'s topics. It was created as a\r\n          <a href="https://www.freecodecamp.com/challenges/build-a-voting-app" target="_blank">Free Code Camp</a>\r\n          project.\r\n        </p>\r\n        <p>This application was built using the MEAN Stack:</p>\r\n        <ul>\r\n          <li>The front end is an Angular 4 / Typescript project created with the excellent Angular-CLI.</li>\r\n          <li>The back end uses Node v.6.9.2 and Express.</li>\r\n          <li>Data is hosted in the cloud at MLab, using MongoDB and Mongoose.</li>\r\n          <li>The authentication module uses Bcrypt.js for password encryption and JSON Web Tokens for maintaining secure sessions.</li>\r\n          <li>UI components are based on Bootstrap and animated with the Angular animations module.</li>\r\n          <li>The doughnut chart was created using Chart.js.</li>\r\n        </ul>\r\n        <p>The complete project repo can be viewed at <a href="https://github.com/ARWL2016/voting-app" target="_blank">Github</a>.</p>\r\n        <p><b>Alistair Willis</b></p>\r\n      </div>\r\n    </div>\r\n</section>\r\n'},"5vvJ":function(t,e,n){"use strict";var o=n("3j3K"),r=n("7fwu"),a=n("5oXY"),i=n("huE7"),s=n("3jKc");n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n){this._auth=t,this._router=e,this._toastr=n}return t.prototype.ngOnInit=function(){},t.prototype.submitForm=function(){var t=this;return this.password.length<3?void(this.error="Password must be at least 3 characters."):this.password!==this.passwordConfirmation?void(this.error="Passwords do not match. Please try again."):void(this.username&&(this.user={username:this.username,password:this.password},this._auth.register(this.user).then(function(){console.log("user created"),t._toastr.success("Thanks for signing up!"),t._router.navigate(["/home"])}).catch(function(e){t.error="Username is already taken. Please try again."})))},t}();p=c([n.i(o.Component)({selector:"app-registration",template:n("v+KO"),styles:[n("HL21")],animations:[i.a]}),l("design:paramtypes",["function"==typeof(u=void 0!==r.a&&r.a)&&u||Object,"function"==typeof(f=void 0!==a.b&&a.b)&&f||Object,"function"==typeof(d=void 0!==s.a&&s.a)&&d||Object])],p);var u,f,d},"5xMp":function(t,e){t.exports='\r\n<div>\r\n  <nav class="navbar navbar-default">\r\n    <div class="container">\r\n      <a class="navbar-brand"><b>votogo </b></a>\r\n\r\n        <ul class="nav navbar-nav">\r\n          <li><a [routerLink]="[\'/home\']">TOPIC INDEX</a></li>\r\n          <li *ngIf="username"><a [routerLink]="[\'/home\', username]">MY TOPICS</a></li>\r\n          <li *ngIf="username"><a [routerLink]="[\'/create\']">NEW TOPIC</a></li>\r\n          <li><a [routerLink]="[\'/about\']">ABOUT</a></li>\r\n      </ul>\r\n\r\n      <ul class="nav navbar-nav navbar-right">\r\n        <li *ngIf="!username"><a [routerLink]="[\'/login/register\']">SIGN UP</a></li>\r\n        <li *ngIf="!username"><a [routerLink]="[\'/login\']">LOGIN</a></li>\r\n        <li *ngIf="username"><a>Logged in as <b>{{ username | uppercase }}</b></a></li>\r\n        <button *ngIf="username" class="btn btn-default navbar-btn" (click)="logout()">LOGOUT</button>\r\n      </ul>\r\n\r\n    </div>\r\n  </nav>\r\n</div>\r\n\r\n  <div class="container">\r\n    <router-outlet></router-outlet>\r\n  </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'},"7fwu":function(t,e,n){"use strict";var o=n("3j3K"),r=n("Fzro"),a=n("eErF");n.n(a);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._http=t,this._authUrl="/api/auth/"}return t.prototype.register=function(t){var e=this;console.log("REGISTER CALL");var n=this._authUrl+"register";return this._http.post(n,t).toPromise().then(function(t){console.log("response",t),e.processAuthToken(t)})},t.prototype.login=function(t){var e=this,n=this._authUrl+"login";return this._http.post(n,t).toPromise().then(function(t){return e.processAuthToken(t),Promise.resolve(!0)}).catch(function(t){return Promise.reject(t)})},t.prototype.logout=function(){var t=this,e=window.localStorage.getItem("token"),n=new r.b({"x-auth":e}),o=new r.c({headers:n}),a=this._authUrl+"logout";return this._http.delete(a,o).toPromise().then(function(){t.currentUser=void 0,window.localStorage.removeItem("token"),window.localStorage.removeItem("username")})},t.prototype.isValidated=function(){var t=window.localStorage.getItem("token"),e=window.localStorage.getItem("username");return t&&e?(this.currentUser={username:e},e):null},t.prototype.processAuthToken=function(t){var e=t.json(),n=e.username,o=t.headers.toJSON(),r=o["x-auth"][0];console.log("PROCESS AUTH TOKEN",e),console.log("PROCESS AUTH TOKEN",r),this.currentUser=e,window.localStorage.setItem("token",r),window.localStorage.setItem("username",n)},t}();c=i([n.i(o.Injectable)(),s("design:paramtypes",["function"==typeof(l=void 0!==r.d&&r.d)&&l||Object])],c);var l},"8yE1":function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".panel-heading{background-color:#262626;color:orange;border-color:#666}.panel-title{font-size:1.5em;font-family:Roboto,sans-serif;padding:5px}.panel{background-color:#262626;color:#fff;font-family:Roboto;font-size:1.3em;border:0;line-height:32px;margin-top:30px}",""]),t.exports=t.exports.toString()},"B6/k":function(t,e,n){"use strict";var o=n("3j3K"),r=n("+Cee"),a=n("5oXY"),i=n("7fwu"),s=n("huE7");n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n,o){this._data=t,this._auth=e,this._router=n,this._route=o}return t.prototype.ngOnInit=function(){var t=this;this.username=this._route.snapshot.params.id,this.username?this._data.fetchTopicsByUser().then(function(e){return t.topics=e}):(this.username=this._auth.isValidated(),this._data.fetchTopicIndex().then(function(e){return t.topics=e}))},t}();p=c([n.i(o.Component)({selector:"app-index",template:n("qItX"),styles:[n("CawE")],animations:[s.a]}),l("design:paramtypes",["function"==typeof(u=void 0!==r.a&&r.a)&&u||Object,"function"==typeof(f=void 0!==i.a&&i.a)&&f||Object,"function"==typeof(d=void 0!==a.b&&a.b)&&d||Object,"function"==typeof(h=void 0!==a.c&&a.c)&&h||Object])],p);var u,f,d,h},CawE:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"a:hover{text-decoration:none}.topic-wrapper{margin-top:30px}.panel-heading{background-color:#262626;color:orange;border-color:#666}.panel-heading:hover{background-color:#363636}.panel-title{font-size:1.5em;font-family:Roboto,sans-serif;padding:5px}.panel{background-color:#262626;color:#fff;font-family:Roboto;font-size:1.3em;border:0}.topic-details{font-size:.9em;color:#888}.welcome-panel{background-color:#444}.welcome-panel a{color:#fff;text-decoration:underline}.welcome-panel:hover{background-color:#444}.welcome-panel div{padding:20px}.welcome-panel p{line-height:30px;letter-spacing:1.5px}.welcome-panel h2{font-weight:700;letter-spacing:2px}",""]),t.exports=t.exports.toString()},F95K:function(t,e,n){"use strict";var o=n("3j3K"),r=n("5oXY"),a=n("+Cee"),i=n("7fwu"),s=n("huE7"),c=n("3jKc");n.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,o,r){this._route=t,this._router=e,this._data=n,this._auth=o,this._toastr=r,this.hasVoted=!1,this.toggleButton="View Chart",this.view="data",console.log("snapshot"+this._route.snapshot.params.id),this._id=this._route.snapshot.params.id}return t.prototype.ngOnInit=function(){var t=this;this._data.fetchTopicById(this._id).subscribe(function(e){t.topic=e,t.results=e.results,t.totalVotes=t.getTotalVotes(),t.currentUser=t._auth.isValidated(),t.topic.voters.forEach(function(e){e===t.currentUser&&(t.hasVoted=!0)})})},t.prototype.getTotalVotes=function(){return this.topic.results.map(function(t){return t.votes}).reduce(function(t,e){return t+e})},t.prototype.castVote=function(t){this.hasVoted||(this.topic.results.forEach(function(e){e.option===t.target.value&&(e.votes+=1)}),this.topic.voters.push(this.currentUser),this.hasVoted=!0,this.totalVotes=this.getTotalVotes(),this._data.castVote(this._id,this.topic),this._toastr.success("Thanks for your vote"))},t.prototype.deleteTopic=function(t){var e=this;this._data.deleteTopic(t).then(function(){e._toastr.warning("Topic deleted!"),e._router.navigate(["/home"])})},t.prototype.toggleDisplay=function(){this.view="data"===this.view?"chart":"data",this.toggleButton="View Chart"===this.toggleButton?"View Data":"View Chart"},t}();u=l([n.i(o.Component)({selector:"app-topic",template:n("TkNw"),styles:[n("dDJ4")],animations:[s.a]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.c&&r.c)&&f||Object,"function"==typeof(d=void 0!==r.b&&r.b)&&d||Object,"function"==typeof(h=void 0!==a.a&&a.a)&&h||Object,"function"==typeof(g=void 0!==i.a&&i.a)&&g||Object,"function"==typeof(m=void 0!==c.a&&c.a)&&m||Object])],u);var f,d,h,g,m},HL21:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".login-form{max-width:400px;margin:0 auto;margin-top:100px}.error{color:red;margin-bottom:10px}.panel{color:#fff;font-family:Roboto,sans-serif;font-size:1.3em;border:0}.panel,.panel-heading{background-color:#262626}.panel-heading{color:orange;border-color:#666}.panel-title{font-size:1.5em;font-family:Roboto,sans-serif;padding:5px}.control-label{font-weight:500}.form-control{font-size:.9em;height:38px;font-weight:700}.control-button{margin-top:10px;font-size:1em}",""]),t.exports=t.exports.toString()},Iksp:function(t,e,n){"use strict";var o=n("Qbdm"),r=n("3j3K"),a=n("NVOs"),i=n("Fzro"),s=n("5oXY"),c=n("KN8t"),l=n("TXDH"),p=(n.n(l),n("YWx4")),u=n("B6/k"),f=n("s29R"),d=n("+Cee"),h=n("7fwu"),g=n("F95K"),m=n("Quv+"),v=n("5vvJ"),b=n("NEgV"),y=n("3jKc"),j=n("IspY"),w=n("QdDP");n.d(e,"a",function(){return _});var x=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},_=function(){function t(){}return t}();_=x([n.i(r.NgModule)({declarations:[p.a,u.a,g.a,f.a,m.a,v.a,j.a,w.a],imports:[o.a,c.a,a.a,i.a,l.ChartsModule,s.a.forRoot([{path:"topic/:id",component:g.a},{path:"login",component:f.a},{path:"login/register",component:v.a},{path:"home",component:u.a},{path:"home/:id",component:u.a},{path:"create",canActivate:[b.a],component:m.a},{path:"about",component:w.a},{path:"**",redirectTo:"home",pathMatch:"full"}])],providers:[d.a,h.a,b.a,y.a],bootstrap:[p.a]})],_)},IspY:function(t,e,n){"use strict";var o=n("3j3K"),r=n("+Cee"),a=n("huE7");n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._data=t,this.chartLabels=[],this.chartData=[],this.chartType="doughnut"}return t.prototype.ngOnInit=function(){var t=this;console.log("chart component",this._id),this._data.fetchTopicById(this._id).subscribe(function(e){t.results=e.results,t.results.forEach(function(e){t.chartData.push(e.votes),t.chartLabels.push(e.option)}),console.log(t.chartLabels),console.log(t.chartData)})},t}();i([n.i(o.Input)(),s("design:type",Object)],c.prototype,"_id",void 0),c=i([n.i(o.Component)({selector:"app-chart",template:n("iWSd"),styles:[n("c8hr")],animations:[a.a]}),s("design:paramtypes",["function"==typeof(l=void 0!==r.a&&r.a)&&l||Object])],c);var l},MOVZ:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="MOVZ"},NEgV:function(t,e,n){"use strict";var o=n("3j3K"),r=n("7fwu");n.d(e,"a",function(){return s});var a=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this._auth=t}return t.prototype.canActivate=function(){return!!this._auth.isValidated()},t}();s=a([n.i(o.Injectable)(),i("design:paramtypes",["function"==typeof(c=void 0!==r.a&&r.a)&&c||Object])],s);var c},"NFO/":function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".panel{color:#fff;font-family:Roboto,sans-serif;font-size:1.3em;border:0;max-width:800px;margin:0 auto;margin-top:30px}.panel,.panel-heading{background-color:#262626}.panel-heading{color:orange;border-color:#666}.panel-title{font-size:1.5em;font-family:Roboto,sans-serif;padding:5px}.form-control{font-size:.9em;height:38px;font-weight:700}.topic-option{width:300px;margin-bottom:5px}.output{color:#fff}.option-badge{margin:0 3px 15px;padding:4px 10px;background-color:#363636;border-radius:8px;font-size:.9em}.error-message{margin-top:10px}.control-button{margin-top:30px;font-size:1em;margin-right:5px}",""]),t.exports=t.exports.toString()},QdDP:function(t,e,n){"use strict";var o=n("3j3K"),r=n("huE7");n.d(e,"a",function(){return s});var a=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();s=a([n.i(o.Component)({selector:"app-about",template:n("4QKn"),styles:[n("8yE1")],animations:[r.a]}),i("design:paramtypes",[])],s)},"Quv+":function(t,e,n){"use strict";var o=n("3j3K"),r=n("+Cee"),a=n("5oXY"),i=n("v+m5"),s=n("UV2Q"),c=n("7fwu"),l=n("huE7"),p=n("3jKc");n.d(e,"a",function(){return d});var u=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n,o){this._data=t,this._router=e,this._auth=n,this._toastr=o,this.result=new s.a("",0),this.newTopic=new i.a("","","",[],[]),this.options=[]}return t.prototype.ngOnInit=function(){console.log("INIT: ",this.result),console.log("INIT: ",this.newTopic),this.newTopic.username=this._auth.isValidated()},t.prototype.addOption=function(t){if(t.preventDefault(),this.option){var e=new s.a(this.option,0);this.newTopic.results.push(e),this.options.push(this.option),this.option="",this.result=new s.a("",0)}},t.prototype.submitForm=function(){this.newTopic.topicQuestion&&this.newTopic.topicTitle&&this.newTopic.results.length>1?(this._data.addNewTopic(this.newTopic).subscribe(),this.newTopic=new i.a("","","",[],[]),this._toastr.success("New voting topic added"),this._router.navigate(["/home"])):this.error="Please complete all fields and provide at least two options."},t.prototype.removeOption=function(t){t.preventDefault(),this.newTopic.results.pop(),this.options.pop()},t}();d=u([n.i(o.Component)({selector:"app-create-topic",template:n("rKcX"),styles:[n("NFO/")],animations:[l.a]}),f("design:paramtypes",["function"==typeof(h=void 0!==r.a&&r.a)&&h||Object,"function"==typeof(g=void 0!==a.b&&a.b)&&g||Object,"function"==typeof(m=void 0!==c.a&&c.a)&&m||Object,"function"==typeof(v=void 0!==p.a&&p.a)&&v||Object])],d);var h,g,m,v},TkNw:function(t,e){t.exports='\r\n<div class="topic-wrapper" [@showPage]="\'on\'" >\r\n\r\n<div class="button-wrapper">\r\n  <button (click)="toggleDisplay()" class="btn btn-info control-button">{{ toggleButton }}</button>\r\n  <button class="btn btn-info control-button" [routerLink]="[\'/home\']">Back to Index</button>\r\n\r\n  <button\r\n  *ngIf="topic && currentUser === topic.username && view === \'data\'"\r\n  class="btn btn-warning control-button"\r\n  (click)="deleteTopic(_id)"\r\n  [@showPage]="\'on\'">\r\n  Delete topic\r\n</button>\r\n</div>\r\n\r\n<div class="data-wrapper">\r\n  <div *ngIf="topic && view === \'data\'" class="panel panel-success " [@showPage]="\'on\'" >\r\n    <div class="panel-heading">\r\n      <h2 class="panel-title">{{ topic.topicTitle }}\r\n        <span *ngIf="hasVoted" class="pull-right voted">voted</span>\r\n        <span *ngIf="hasVoted" class="glyphicon glyphicon-ok-sign pull-right" aria-hidden="true"></span>\r\n      </h2>\r\n    </div>\r\n    <div class="panel-body">\r\n      <p>{{ topic.topicQuestion }}</p>\r\n      <p class="topic-details">by {{ topic.username  }}</p>\r\n    </div>\r\n\r\n    <table class="table">\r\n      <tbody class="tbody">\r\n        <tr *ngFor="let result of results">\r\n          <td class="cell">{{ result.option | titlecase }}</td>\r\n          <td class="cell-result"><b>{{ result.votes }}</b></td>\r\n        </tr>\r\n        <tr>\r\n          <td class="cell">TOTAL</td>\r\n          <td class="cell-result"><b>{{ totalVotes }}</b></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n  </div>\r\n  \x3c!--results panel end--\x3e\r\n  <app-chart *ngIf="view === \'chart\'" [_id]="_id"></app-chart>\r\n\r\n  <div *ngIf="!hasVoted && currentUser && view === \'data\'" class="panel panel-success voting-panel">\r\n    <div class="panel-heading">\r\n      <h3 class="panel-title">Cast Your Vote</h3>\r\n    </div>\r\n    <div class="panel-body">\r\n      <div class="btn-group" role="group">\r\n        <button\r\n          *ngFor="let result of results"\r\n          class="btn btn-success voting-button"\r\n          value="{{ result.option }}"\r\n          (click)="castVote($event)">\r\n          {{ result.option }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf="!currentUser && view === \'data\'" class="alert alert-warning" role="alert" >\r\n    To vote, please <a [routerLink]="[\'/login/register\']">register</a> or <a [routerLink]="[\'/login\']">login</a>.\r\n  </div>\r\n</div>\r\n\x3c!--data wrapper--\x3e\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n'},UV2Q:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){this.option=t,this.votes=e}return t}()},Y0uS:function(t,e){t.exports='<form #form = "ngForm" (submit)="submitForm(form)" [@showPage]="\'on\'">\r\n\r\n  <div class="panel panel-default login-form">\r\n    <div class="panel-heading">\r\n      <h3 class="panel-title">Login</h3>\r\n    </div>\r\n\r\n    <div class="panel-body">\r\n        <p>Login, or <a [routerLink]="[\'register\']">sign up </a>for a free account</p>\r\n        <div class="form-group">\r\n          <label class="control-label">Username</label>\r\n          <input\r\n            [(ngModel)]="username"\r\n            class="form-control"\r\n            name="username"\r\n            placeholder="enter your username"\r\n            type="text">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Password</label>\r\n          <input\r\n            [(ngModel)]="password"\r\n            class="form-control"\r\n            name="password"\r\n            placeholder="enter your password"\r\n            type="password">\r\n        </div>\r\n        <div>{{error}}</div>\r\n\r\n        <button type="submit" class="btn btn-primary control-button">Login</button>\r\n\r\n\r\n\r\n    </div>\r\n  </div>\r\n\r\n</form>\r\n'},YWx4:function(t,e,n){"use strict";var o=n("3j3K"),r=n("7fwu"),a=n("5oXY"),i=n("3jKc");n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){this._auth=t,this._router=e,this._toastr=n}return t.prototype.ngOnInit=function(){var t=this._auth.isValidated();t&&(this.username=t,console.log("APP COMPONENT INIT",this.username))},t.prototype.ngDoCheck=function(){console.log("do check"),this.username=this._auth.isValidated()},t.prototype.logout=function(){console.log("LOGOUT"),this._auth.logout(),this._toastr.success("You have been logged out."),this._router.navigate(["/login"])},t}();l=s([n.i(o.Component)({selector:"app-root",template:n("5xMp"),styles:[n("sQHO")]}),c("design:paramtypes",["function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(u=void 0!==a.b&&a.b)&&u||Object,"function"==typeof(f=void 0!==i.a&&i.a)&&f||Object])],l);var p,u,f},c8hr:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".doughnut-chart{height:500px;width:500px;margin:0 auto;margin-top:30px}",""]),t.exports=t.exports.toString()},dDJ4:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".topic-wrapper{max-width:800px;margin-top:10px}.button-wrapper{float:left;width:200px}.data-wrapper{float:left;width:500px}.control-button{margin-bottom:12px;padding:10px 20px;width:150px}.voting-button{margin:5px}.cell{text-align:left}.cell,.cell-result{padding:10px 20px;border-width:0;font-size:.9em}.cell-result{text-align:right}.glyphicon{color:green;font-size:22px;margin-left:10px}.alert{margin-top:25px}.voted{font-size:16px;padding:3px 0 3px 5px}.panel-heading{background-color:#262626;color:orange;border-color:#666}.panel-heading:hover{background-color:#363636}.panel-title{font-size:1.5em;font-family:Roboto,sans-serif;padding:5px}.panel{background-color:#262626;color:#fff;font-family:Roboto;font-size:1.3em;border:0}.topic-details{font-size:.9em;color:#888}.thead{border-bottom:0}",""]),t.exports=t.exports.toString()},hC07:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".login-form{max-width:400px;margin:0 auto;margin-top:100px}.panel{color:#fff;font-family:Roboto,sans-serif;font-size:1.3em;border:0}.panel,.panel-heading{background-color:#262626}.panel-heading{color:orange;border-color:#666}.panel-title{font-size:1.5em;font-family:Roboto,sans-serif;padding:5px}.form-control{font-size:.9em;height:38px;font-weight:700}.control-label{font-weight:500}.control-button{margin-top:10px;font-size:1em}",""]),t.exports=t.exports.toString()},huE7:function(t,e,n){"use strict";var o=n("Um43");n.d(e,"a",function(){return r});var r=n.i(o.f)("showPage",[n.i(o.g)("on",n.i(o.c)({transform:"translateY(0)"})),n.i(o.h)("void => on",[n.i(o.c)({opacity:0}),n.i(o.i)("500ms ease-in")])])},iWSd:function(t,e){t.exports='\r\n<div *ngIf="results" class="doughnut-chart" style="display: block" >\r\n  <canvas baseChart\r\n              [data]="chartData"\r\n              [labels]="chartLabels"\r\n              [chartType]="chartType"\r\n              (chartHover)="chartHovered($event)"\r\n              (chartClick)="chartClicked($event)"></canvas>\r\n</div>\r\n'},kZql:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},qItX:function(t,e){t.exports='\r\n<section\r\n  *ngIf="!username"\r\n  class="topic-wrapper "\r\n  [@showPage]="\'on\'">\r\n    <div class="panel panel-success welcome-panel">\r\n      <div class="panel-heading welcome-panel">\r\n        <h2 class="panel-title">Welcome to Votogo</h2>\r\n      </div>\r\n      <div class="panel-body">\r\n        <p class="info">Votogo is a free voting app which allows users to create, share and view the results of surveys.To view survey results, click on a topic below.</p>\r\n        <p class="info">To vote and create your own topics, please <a [routerLink]="[\'/login/register\']">register</a> or <a [routerLink]="[\'/login\']">login</a>.</p>\r\n\r\n      </div>\r\n    </div>\r\n\r\n</section>\r\n\r\n<section\r\n  *ngFor="let topic of topics"\r\n  class="topic-wrapper"\r\n  [@showPage]="\'on\'">\r\n  <a class="topic" [routerLink]="[\'/topic\', topic._id]">\r\n    <div class="panel panel-success">\r\n      <div class="panel-heading">\r\n        <h3 class="panel-title">{{ topic.topicTitle }}</h3>\r\n      </div>\r\n      <div class="panel-body">\r\n        <p>{{ topic.topicQuestion }}</p>\r\n        <p class="topic-details">by {{ topic.username }}</p>\r\n      </div>\r\n    </div>\r\n    </a>\r\n</section>\r\n\r\n\r\n\r\n\r\n\r\n'},rKcX:function(t,e){t.exports='<form #form="ngForm" (submit)="submitForm(form)" [@showPage]="\'on\'">\r\n\r\n  <div class="panel panel-default login-form">\r\n    <div class="panel-heading">\r\n      <h3 class="panel-title">Create Topic</h3>\r\n    </div>\r\n\r\n    <div class="panel-body">\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Topic Title</label>\r\n          <input\r\n            [(ngModel)]="newTopic.topicTitle"\r\n\r\n            class="form-control"\r\n            name="topicTitle"\r\n            placeholder="enter a title for your voting topic"\r\n            type="text">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Topic Question</label>\r\n          <input\r\n            [(ngModel)]="newTopic.topicQuestion"\r\n\r\n            class="form-control"\r\n            name="topicQuestion"\r\n            placeholder="enter a question for your voting topic"\r\n            type="text">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Options</label>\r\n          <input\r\n            [(ngModel)]="option"\r\n            class="form-control"\r\n            name="option"\r\n            placeholder="add a voting option and press enter"\r\n            type="text">\r\n        </div>\r\n        <div>\r\n          <span class="option-badge" *ngFor="let option of options">{{ option }}</span>\r\n        </div>\r\n        <div class="error-message">{{error}}</div>\r\n\r\n          <button class="btn btn-primary control-button" (click)="addOption($event)">\r\n            Add option\r\n          </button>\r\n          <button class="btn btn-primary control-button" (click)="removeOption($event)">\r\n            Undo\r\n          </button>\r\n\r\n\r\n\r\n\r\n        <button type="submit" class="btn btn-primary pull-right control-button">Create</button>\r\n\r\n\r\n    </div>\r\n  </div>\r\n\r\n</form>\r\n\r\n\x3c!--<div class="output">\r\nModel: {{ model | json}}\r\n<br>\r\nAngular: {{ form.value | json}}\r\n</div>--\x3e\r\n'},s29R:function(t,e,n){"use strict";var o=n("3j3K"),r=n("7fwu"),a=n("5oXY"),i=n("huE7"),s=n("3jKc");n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n){this._auth=t,this._route=e,this._toastr=n}return t.prototype.ngOnInit=function(){},t.prototype.submitForm=function(){var t=this;this.username&&this.password&&(this.user={username:this.username,password:this.password},this._auth.login(this.user).then(function(e){e&&(t._toastr.success("You have been logged in."),t._route.navigate(["/home"]))}).catch(function(e){t.error="Your login details were incorrect. Please try again."}))},t}();p=c([n.i(o.Component)({selector:"app-login",template:n("Y0uS"),styles:[n("hC07")],animations:[i.a]}),l("design:paramtypes",["function"==typeof(u=void 0!==r.a&&r.a)&&u||Object,"function"==typeof(f=void 0!==a.b&&a.b)&&f||Object,"function"==typeof(d=void 0!==s.a&&s.a)&&d||Object])],p);var u,f,d},sQHO:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".container{max-width:960px}",""]),t.exports=t.exports.toString()},uslO:function(t,e,n){function o(t){return n(r(t))}function r(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id="uslO"},"v+KO":function(t,e){t.exports='<form #form="ngForm" (submit)="submitForm(form)" novalidate [@showPage]="\'on\'">\r\n\r\n  <div class="panel panel-default login-form">\r\n    <div class="panel-heading">\r\n      <h3 class="panel-title">Register</h3>\r\n    </div>\r\n\r\n    <div class="panel-body">\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Enter your unique username</label>\r\n          <input\r\n            [(ngModel)]="username"\r\n            class="form-control"\r\n            name="username"\r\n            placeholder="username"\r\n            type="text">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Password</label>\r\n          <input\r\n            [(ngModel)]="password"\r\n            class="form-control"\r\n            name="password"\r\n            placeholder="minimum 3 characters"\r\n            type="password">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n          <label class="control-label">Confirm password</label>\r\n          <input\r\n            [(ngModel)]="passwordConfirmation"\r\n            class="form-control"\r\n            name="password"\r\n            placeholder=""\r\n            type="password">\r\n        </div>\r\n        <div class="error">{{error}}</div>\r\n\r\n        <button type="submit" class="btn btn-primary control-button">Register</button>\r\n\r\n\r\n\r\n    </div>\r\n  </div>\r\n\r\n</form>\r\n'},"v+m5":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n,o,r){this.username=t,this.topicTitle=e,this.topicQuestion=n,this.results=o,this.voters=r}return t}()},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("3j3K"),r=n("O61y"),a=n("Iksp");n("kZql").a.production&&n.i(o.enableProdMode)(),n.i(r.a)().bootstrapModule(a.a)}},[0]);